(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e){e.exports={DrawerOverview:{pl:"Przegl\u0105d",us:"Overview"},DrawerReports:{pl:"Raporty",us:"Reports"},DrawerEvents:{pl:"Zdarzenia i alarmy",us:"Events and alerts"},DrawerDevices:{pl:"Urz\u0105dzenia",us:"Devices"},DrawerUsers:{pl:"U\u017cytkownicy",us:"Users"},DrawerAdvanced:{pl:"Ustawienia zaaw.",us:"Advanced settings"},languageName:{pl:"Polski",us:"English"},mainTitle:{pl:"PowermonitorIOT",us:"PowermonitorIOT"},SignIn:{pl:"Zaloguj",us:"Sign in"},SignOut:{pl:"Wyloguj",us:"Sign out"},Settings:{pl:"Ustawienia",us:"Settings"},Cancel:{pl:"Anuluj",us:"Cancel"},UserDialogTitle:{pl:"Zaloguj si\u0119..",us:"Please sign in.."},UserLoginError:{pl:"B\u0142\u0105d podczas logowania",us:"Error during singing in"},DeviceMenuTitle:{pl:"Urz\u0105dzenia",us:"Devices"},DeviceConfigVariableTitle:{pl:"Zmienne urz\u0105dzenia",us:"Device variables"},DeviceConfigCalcElementTitle:{pl:"Elementy specjalne",us:"Calculation elements"},ElementsConfigTableElementName:{pl:"Nazwa elementu",us:"Element name"},ElementsConfigTableElementValue:{pl:"Warto\u015b\u0107",us:"Value"}}},216:function(e,t,a){e.exports=a(356)},221:function(e,t,a){},222:function(e,t,a){},34:function(e){e.exports={authTokenName:"x-auth-token",authRoute:"/api/auth",devicesRoute:"/api/devices",infoRoute:"/api/info",valuesRoute:"/api/values",variablesRoute:"/api/variables",calcElementsRoute:"/api/calcElements",minCPUTemp:50,maxCPUTemp:85}},356:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),i=a.n(c),o=(a(221),a(13)),s=a(11),l=a(15),u=a(14),p=a(16),d=(a(222),a(6)),m=a(446),f=a(12),h=a(404),v=a(405),b=a(396),g=a(80),E=a(406),O=a(407),w=function(){return{type:"HIDE_DRAWER"}},y=a(112),j=a(28),C=a(196),x=a(7),k=a(23);function I(e){if(""===e||e==={}||e===[])return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function D(e){return 1e3*e}function T(e){return Math.round(e/1e3)}function A(e){return new Date(e)}function R(e){return e.getTime()}function _(e){return null!==e&&void 0!==e}function M(e,t){var a={},n=!0,r=!1,c=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;_(t)?a[s[t]]=s:a[s]={id:s}}}catch(l){r=!0,c=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw c}}return a}function S(e){var t=Object(x.a)({},e.properties.ranges);if(e.properties.autoRangeY&&_(e.data.extremes.valueMax)&&_(e.data.extremes.valueMin)&&(t.valueMax=e.data.extremes.valueMax,t.valueMin=e.data.extremes.valueMin),e.properties.autoRangeX&&_(e.data.extremes.timeMax)&&_(e.data.extremes.timeMin)){var a=e.properties.ranges.timeMax-e.properties.ranges.timeMin;t.timeMax=e.data.extremes.timeMax,t.timeMin=e.data.extremes.timeMax-a}return t}function N(e,t,a){var n=a.valueMin,r=a.valueMax,c=a.timeMin,i=a.timeMax,o=Object(x.a)({},a);return(!_(i)||e>i)&&(o.timeMax=e),(!_(c)||e<c)&&(o.timeMin=e),(!_(r)||t>r)&&(o.valueMax=t),(!_(n)||t<n)&&(o.valueMin=t),o}function U(e,t){for(var a=Object(x.a)({},t),n=0,r=Object.keys(e);n<r.length;n++){var c=r[n],i=e[c];a=N(parseInt(c),i,a)}return a}var H=a(452),W=Object(j.c)({drawer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shown:!1};switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_DRAWER":return Object(x.a)({},e,{shown:!0});case"HIDE_DRAWER":return Object(x.a)({},e,{shown:!1});default:return e}},userPreferences:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lang:"pl"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_USER_LANGUAGE":return Object(x.a)({},e,{lang:t.payload.lang});default:return e}},languageWindow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shown:!1};switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_LANGUAGE_WINDOW":return Object(x.a)({},e,{shown:!0});case"HIDE_LANGUAGE_WINDOW":return Object(x.a)({},e,{shown:!1});default:return e}},userWindow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shown:!1};switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_USER_WINDOW":return Object(x.a)({},e,{shown:!0});case"HIDE_USER_WINDOW":return Object(x.a)({},e,{shown:!1});default:return e}},userDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shown:!1};switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_USER_DIALOG":return Object(x.a)({},e,{shown:!0});case"HIDE_USER_DIALOG":return Object(x.a)({},e,{shown:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentUser:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER_WITH_JWT":case"LOGIN_USER":return Object(x.a)({},e,{currentUser:t.payload.user});case"LOGOUT_USER":return Object(x.a)({},e,{currentUser:null});default:return e}},layout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{busy:!1,userCheckActive:!1};switch((arguments.length>1?arguments[1]:void 0).type){case"SET_LAYOUT_BUSY":return Object(x.a)({},e,{busy:!0});case"SET_LAYOUT_READY":return Object(x.a)({},e,{busy:!1});case"LAYOUT_ACTIVATE_USER_CHECK":return Object(x.a)({},e,{userCheckActive:!0});case"LAYOUT_DEACTIVATE_USER_CHECK":return Object(x.a)({},e,{userCheckActive:!1});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shown:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ERROR_DIALOG":return Object(x.a)({},e,{shown:!0,error:t.payload.error});case"HIDE_ERROR_DIALOG":return Object(x.a)({},e,{shown:!1,error:null});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{devices:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATA_FETCH_DEVICES":var a=t.payload.devices;return Object(x.a)({},e,{devices:a});case"DATA_FETCH_DEVICE":var n=Object(x.a)({},e.devices,Object(k.a)({},t.payload.device.id,t.payload.device));return Object(x.a)({},e,{devices:n});case"DATA_FETCH_VARIABLE":var r=e.devices[t.payload.deviceId],c=Object(x.a)({},r,{variables:Object(x.a)({},r.variables,Object(k.a)({},t.payload.variable.id,t.payload.variable))}),i=Object(x.a)({},e.devices,Object(k.a)({},t.payload.deviceId,c));return Object(x.a)({},e,{devices:i});case"DATA_FETCH_CALCELEMENT":var o=e.devices[t.payload.deviceId],s=Object(x.a)({},o,{calculationElements:Object(x.a)({},o.calculationElements,Object(k.a)({},t.payload.calculationElement.id,t.payload.calculationElement))}),l=Object(x.a)({},e.devices,Object(k.a)({},t.payload.deviceId,s));return Object(x.a)({},e,{devices:l});case"DATA_FETCH_VARIABLES":var u=e.devices[t.payload.deviceId],p=Object(x.a)({},u,{variables:Object(x.a)({},u.variables,t.payload.variables)}),d=Object(x.a)({},e.devices,Object(k.a)({},t.payload.deviceId,p));return Object(x.a)({},e,{devices:d});case"DATA_FETCH_CALCELEMENTS":var m=e.devices[t.payload.deviceId],f=Object(x.a)({},m,{calculationElements:Object(x.a)({},m.calculationElements,t.payload.calculationElements)}),h=Object(x.a)({},e.devices,Object(k.a)({},t.payload.deviceId,f));return Object(x.a)({},e,{devices:h});case"DATA_FETCH_VALUES":for(var v=t.payload,b=v.deviceId,g=v.values,E=e.devices[b],O=E.variables,w=E.calculationElements,y={},j={},C=0,I=Object.keys(E.variables);C<I.length;C++){var D=I[C],T=g[D];_(T)?y[D]=Object(x.a)({},O[D],{value:T}):y[D]=O[D]}for(var A=0,R=Object.keys(E.calculationElements);A<R.length;A++){var M=R[A],S=g[M];_(S)?j[M]=Object(x.a)({},w[M],{value:S}):j[M]=w[M]}var N=Object(x.a)({},E,{variables:y,calculationElements:j}),U=Object(x.a)({},e.devices,Object(k.a)({},b,N));return Object(x.a)({},e,{devices:U});case"DATA_REFRESH_CONNECTIONS":if(!e.devices)return e;var H=Object(x.a)({},e.devices),W=!0,L=!1,V=void 0;try{for(var F,P=t.payload.connections[Symbol.iterator]();!(W=(F=P.next()).done);W=!0){var B=F.value,G=B.deviceId,z=B.connection,Y=e.devices[G];Y&&(H[G]=Object(x.a)({},Y,{connected:z}))}}catch(Z){L=!0,V=Z}finally{try{W||null==P.return||P.return()}finally{if(L)throw V}}return Object(x.a)({},e,{devices:H});default:return e}},info:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{info:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_INFO":return Object(x.a)({},e,{info:t.payload.info});default:return e}},trends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TREND_CREATE":var a=t.payload,n=a.trendId,r=a.variableId,c=a.deviceId,i=a.initialAutoRangeX,o=a.initialAutoRangeY,s=a.currentValuesRefreshing,l=a.historyValuesRefreshing,u={trendId:n,properties:{ranges:a.initialRanges,autoRangeX:!_(i)||i,autoRangeY:!_(o)||o,currentValuesRefreshing:!_(s)||s,historyValuesRefreshing:!_(l)||l},variableId:r,deviceId:c,data:{values:{},extremes:{}},currentData:{values:{},extremes:{}},historyData:{values:{},extremes:{},fetchExtremes:{}}};return Object(x.a)({},e,Object(k.a)({},n,u));case"TREND_UPDATE":var p=t.payload,d=p.trendId,m=p.properties,f=e[d],h=Object(x.a)({},f.properties,m,{ranges:Object(x.a)({},f.properties.ranges)});_(m.ranges)&&(h.ranges=Object(x.a)({},f.properties.ranges,m.ranges));var v=Object(x.a)({},f,{properties:h});return v.properties.ranges=S(v),Object(x.a)({},e,Object(k.a)({},d,v));case"TREND_REMOVE":var b=t.payload.trendId,g=Object(x.a)({},e);return delete g[b],g;case"TREND_FETCH_CURRENT_VALUE":var E=t.payload,O=E.trendId,w=E.time,y=E.value,j=e[O];if(w===j.currentData.lastTickId)return e;var C=N(w,y,e[O].data.extremes),I={extremes:C,values:Object(x.a)({},j.currentData.values,Object(k.a)({},w,y)),lastTickId:w},D={extremes:C,values:Object(x.a)({},j.data.values,Object(k.a)({},w,y))},T=Object(x.a)({},j,{data:D,currentData:I});return T.properties.ranges=S(T),Object(x.a)({},e,Object(k.a)({},O,T));case"TREND_FETCH_HISTORY_VALUES":var A=t.payload,R=A.trendId,M=A.newFetchTimeMin,H=A.newFetchTimeMax,W=A.values,L=e[R],V=Object(x.a)({},L.historyData.fetchExtremes,{timeMin:M,timeMax:H}),F=U(W,e[R].historyData.extremes),P=Object(x.a)({},L.historyData.values,W),B=Object(x.a)({},L.historyData,{values:P,extremes:F,fetchExtremes:V}),G={extremes:U(W,e[R].data.extremes),values:Object(x.a)({},L.data.values,P)},z=Object(x.a)({},L,{data:G,historyData:B});return z.properties.ranges=S(z),Object(x.a)({},e,Object(k.a)({},R,z));default:return e}},trendDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shown:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TREND_DIALOG_SHOW":return Object(x.a)({},e,{shown:!0,trendId:t.payload.trendId,variableId:t.payload.variableId,deviceId:t.payload.deviceId});case"TREND_DIALOG_HIDE":return Object(x.a)({},e,{shown:!1});default:return e}},deviceConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tabNumber:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DEVICE_CONFIG_CHANGE_TAB":return Object(x.a)({},e,{tabNumber:t.payload.tabNumber});default:return e}},form:H.a}),L=Object(j.d)(W,Object(j.a)(C.a)),V=function(e){var t=L.getState().userPreferences;if(!t)return e;var a=t.lang;if(!a)return e;var n=y[e];if(!n)return e;var r=n[a];return r||e},F=V,P=a(397),B=function(){return{type:"SHOW_LANGUAGE_WINDOW"}},G=function(){return{type:"HIDE_LANGUAGE_WINDOW"}},z=a(207),Y=a(393),Z=a(394),X=a(395),J=function(e){return{type:"CHANGE_USER_LANGUAGE",payload:{lang:e}}},K=a(198),q=a.n(K),$=y.languageName,Q=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleMenuClose=function(){a.props.hide()},a.handleLangButtonClick=function(e){a.props.changeLanguage(e),a.props.hide()},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.shown,n=t.classes,c=t.referenceEl,i=Object.keys($);return r.a.createElement(z.a,{id:"language-window",className:n.root,anchorEl:a?c.current:null,keepMounted:!0,open:a,onClose:this.handleMenuClose},r.a.createElement("div",{className:n.menuDiv},i.map(function(t){return r.a.createElement(Y.a,{key:t,onClick:function(){return e.handleLangButtonClick(t)}},r.a.createElement(Z.a,null,r.a.createElement(q.a,{className:n.flagIcon,code:t})),r.a.createElement(X.a,{primary:$[t]}))})))}}]),t}(n.Component),ee=Object(d.a)(function(e){return{root:{},flagIcon:{height:20},menuDiv:{minWidth:200}}})(Q),te=Object(f.b)(function(e,t){return{shown:e.languageWindow.shown}},{hide:G,show:B,changeLanguage:J})(ee),ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleButtonClicked=function(){var e=a.props,t=e.langWindowShown,n=e.showLanguageWindow,r=e.hideLanguageWindow;t?r():n()},a.buttonRef=r.a.createRef(),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{ref:this.buttonRef,onClick:this.handleButtonClicked,color:"inherit"},r.a.createElement(P.a,null)),r.a.createElement(te,{referenceEl:this.buttonRef}))}}]),t}(n.Component),ne=Object(d.a)(function(e){})(ae),re=Object(f.b)(function(e,t){return{langWindowShown:e.languageWindow.shown}},{showLanguageWindow:B,hideLanguageWindow:G})(ne),ce=a(398),ie=function(){return{type:"SHOW_USER_WINDOW"}},oe=function(){return{type:"HIDE_USER_WINDOW"}},se=a(5),le=a.n(se),ue=a(9),pe=a(358),de=a(399),me=a(400),fe=a(401),he=a(402),ve=a(199),be=a.n(ve),ge=a(61),Ee=a.n(ge);Ee.a.defaults.baseURL="",Ee.a.interceptors.response.use(function(e){return e},function(e){return e.response&&e.response.status>=400&&e.response.status<500||console.log(e),Promise.reject(e)});var Oe={get:Ee.a.get,post:Ee.a.post,put:Ee.a.put,delete:Ee.a.delete,assignJWT:function(e,t){Ee.a.defaults.headers.common[e]=t}},we=a(34),ye=we.authTokenName,je=we.authRoute;function Ce(e,t){return xe.apply(this,arguments)}function xe(){return(xe=Object(ue.a)(le.a.mark(function e(t,a){var n,r;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.post(je,{login:t,password:a});case 2:return n=e.sent,r=n.headers[ye],e.abrupt("return",ke(r));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ke(e){return localStorage.setItem(ye,e),Oe.assignJWT(ye,e),function(){var e=localStorage.getItem(ye);return be()(e)}()}var Ie=function(){return{type:"SHOW_USER_DIALOG"}},De=function(){return{type:"HIDE_USER_DIALOG"}},Te=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleMenuClose=function(){a.props.hide()},a.handleSignInClick=function(){a.props.hide(),a.props.showUserDialog()},a.handleSignOutClick=Object(ue.a)(le.a.mark(function e(){return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.hide(),e.next=3,a.props.logoutUser();case 3:case"end":return e.stop()}},e)})),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,a=e.classes,n=e.referenceEl,c=e.user;return r.a.createElement(z.a,{id:"user-window",className:a.root,anchorEl:t?n.current:null,keepMounted:!0,open:t,onClose:this.handleMenuClose},r.a.createElement("div",{className:a.menuDiv},c?r.a.createElement(pe.a,null,r.a.createElement(Z.a,null,r.a.createElement(ce.a,null)),r.a.createElement(X.a,{primary:c.login})):null,c?r.a.createElement(de.a,null):null,c?r.a.createElement(Y.a,{onClick:this.handleSignOutClick},r.a.createElement(Z.a,null,r.a.createElement(me.a,null)),r.a.createElement(X.a,{primary:F("SignOut")})):r.a.createElement(Y.a,{onClick:this.handleSignInClick},r.a.createElement(Z.a,null,r.a.createElement(fe.a,null)),r.a.createElement(X.a,{primary:F("SignIn")})),c?r.a.createElement(Y.a,null,r.a.createElement(Z.a,null,r.a.createElement(he.a,null)),r.a.createElement(X.a,{primary:F("Settings")})):null))}}]),t}(n.Component),Ae=Object(d.a)(function(e){return{root:{},menuDiv:{minWidth:200}}})(Te),Re=Object(f.b)(function(e,t){return{shown:e.userWindow.shown,user:e.user.currentUser}},{hide:oe,show:ie,showUserDialog:Ie,logoutUser:function(){return localStorage.removeItem(ye),{type:"LOGOUT_USER"}}})(Ae),_e=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleButtonClicked=function(){var e=a.props,t=e.userWindowShown,n=e.showUserWindow,r=e.hideUserWindow;t?r():n()},a.buttonRef=r.a.createRef(),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{variant:"contained",color:"inherit",ref:this.buttonRef,onClick:this.handleButtonClicked,className:e.iconButton},r.a.createElement(ce.a,null)),r.a.createElement(Re,{referenceEl:this.buttonRef}))}}]),t}(n.Component),Me=Object(d.a)(function(e){return{button:{margin:e.spacing(1)},icon:{marginRight:e.spacing(1)},iconButton:{}}})(_e),Se=Object(f.b)(function(e,t){return{userWindowShown:e.userWindow.shown,user:e.user.currentUser}},{showUserWindow:ie,hideUserWindow:oe})(Me),Ne=a(403),Ue=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"getLinearBarClasses",value:function(e,t){return e?{colorPrimary:t.linearBackColorAlert,barColorPrimary:t.linearBarColorAlert}:{colorPrimary:t.linearBackColorPrimary,barColorPrimary:t.linearBarColorPrimary}}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.max,n=e.min,c=e.limit,i=e.classes,o=e.Icon;void 0!==a&&null!==a||(a=100),void 0!==n&&null!==n||(n=0),void 0!==c&&null!==c||(c=80);var s=100*(t-n)/(a-n),l=s>=c;return r.a.createElement(r.a.Fragment,null,r.a.createElement(o,{className:i.progressBarIcon,color:l?"error":"inherit"}),r.a.createElement(Ne.a,{className:i.linearProgress,variant:"determinate",value:s,classes:this.getLinearBarClasses(l,i)}))}}]),t}(n.Component),He=Object(d.a)(function(e){return{linearProgress:{width:50,marginLeft:10,marginRight:20},progressBarIcon:{width:16,height:16},linearBackColorPrimary:{backgroundColor:e.palette.grey[600]},linearBarColorPrimary:{backgroundColor:e.palette.grey[100]},linearBackColorAlert:{backgroundColor:e.palette.error.light},linearBarColorAlert:{backgroundColor:e.palette.error.dark}}})(Ue),We=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.drawerShown,n=e.showDrawer,c=e.hideDrawer;return r.a.createElement(h.a,{position:"absolute",className:t.appBar},r.a.createElement(v.a,null,r.a.createElement(b.a,{edge:"start",color:"inherit","aria-label":"Open drawer",onClick:a?c:n},a?r.a.createElement(E.a,null):r.a.createElement(O.a,null)),r.a.createElement(g.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},V("mainTitle")),r.a.createElement(re,null),r.a.createElement(Se,null)))}}]),t}(n.Component),Le=Object(d.a)(function(e){return{appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},title:{flexGrow:1}}})(We),Ve=Object(f.b)(function(e,t){return{lang:e.userPreferences.lang,drawerShown:e.drawer.shown}},{showDrawer:function(){return{type:"SHOW_DRAWER"}},hideDrawer:w})(Le),Fe=a(453),Pe=a(408),Be=a(409),Ge=a(410),ze=a(411),Ye=a(412),Ze=a(4),Xe=a(55),Je=240,Ke=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.shown;return r.a.createElement(Fe.a,{variant:"permanent",classes:{paper:Object(Ze.a)(t.drawerPaper,!a&&t.drawerPaperClose)},open:a},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(de.a,null),r.a.createElement(pe.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(Pe.a,{className:t.toolbarIcon})),r.a.createElement(X.a,{primary:F("DrawerOverview")})),r.a.createElement(pe.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(Be.a,{className:t.toolbarIcon})),r.a.createElement(X.a,{primary:F("DrawerReports")})),r.a.createElement(pe.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(Ge.a,{className:t.toolbarIcon})),r.a.createElement(X.a,{primary:F("DrawerEvents")})),r.a.createElement(de.a,null),r.a.createElement(Xe.b,{to:"/devicesConfig",className:t.link},r.a.createElement(pe.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(ze.a,{className:t.toolbarIcon})),r.a.createElement(X.a,{primary:F("DrawerDevices")}))),r.a.createElement(pe.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(Ye.a,{className:t.toolbarIcon})),r.a.createElement(X.a,{primary:F("DrawerUsers")})),r.a.createElement(pe.a,{button:!0},r.a.createElement(Z.a,null,r.a.createElement(he.a,{className:t.toolbarIcon})),r.a.createElement(X.a,{primary:F("DrawerAdvanced")})))}}]),t}(n.Component),qe=Object(d.a)(function(e){var t;return{toolbarIcon:(t={marginLeft:1},Object(k.a)(t,e.breakpoints.up("sm"),{marginLeft:5}),Object(k.a)(t,"padding",0),t),drawerPaper:{position:"relative",whiteSpace:"nowrap",width:Je,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(k.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,link:{textDecoration:"none",color:"inherit"}}})(Ke),$e=Object(f.b)(function(e,t){return{shown:e.drawer.shown}},{hideDrawer:w})(qe),Qe=a(449),et=a(414),tt=a(415),at=a(416),nt=a(417),rt=a(418),ct=a(448),it=a(447),ot=a(79),st=a.n(ot),lt=st.a.object().keys({login:st.a.string().min(3).max(16).regex(/^\S+$/).required(),password:st.a.string().min(3).max(20).required().required()}),ut=function(e,t){return{type:"SHOW_ERROR_DIALOG",payload:{error:{message:t,title:e}}}},pt=function(){return{type:"HIDE_ERROR_DIALOG"}},dt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).handleDialogClose=function(){a.props.hide(),a.props.reset()},a.handleCancelButtonClick=function(){a.props.hide(),a.props.reset()},a.onSubmit=function(){var e=Object(ue.a)(le.a.mark(function e(t){var n;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.showBusyWindow(),e.prev=1,e.next=4,a.props.loginUser(a.props.formData.login,a.props.formData.password);case 4:a.props.changeUserLang(a.props.user.lang),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),n=e.t0.response?e.t0.response.data:e.t0.message,a.props.showErrorDialog(V("UserLoginError"),n);case 11:a.props.hideBusyWindow(),a.props.reset(),a.props.hide();case 14:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),a.renderField=function(e){var t=e.input,n=e.label,c=e.type,i=e.meta,o=i.touched,s=i.error,l=i.warning;return r.a.createElement("div",null,r.a.createElement(Qe.a,Object.assign({className:a.props.classes.textField},t,{placeholder:n,type:c,fullWidth:!0})),o&&(s&&r.a.createElement(g.a,{className:a.props.classes.errorLabel,variant:"caption"},s)||l&&r.a.createElement(g.a,{className:a.props.classes.errorLabel,variant:"caption"},l)))},a.checkLoginButtonDisable=function(){return!I(mt(a.props.formData))},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,a=e.classes;return r.a.createElement("div",null,r.a.createElement(et.a,{open:t,onClose:this.handleDialogClose,disableBackdropClick:!0,disableEscapeKeyDown:!0},r.a.createElement("form",{className:a.form,onSubmit:this.props.handleSubmit(this.onSubmit)},r.a.createElement(tt.a,{id:"alert-dialog-title"},V("UserDialogTitle")),r.a.createElement(at.a,null,r.a.createElement(ct.a,{name:"login",type:"text",component:this.renderField,label:"Login"}),r.a.createElement(ct.a,{name:"password",type:"password",component:this.renderField,label:"Password"})),r.a.createElement(nt.a,null,r.a.createElement(rt.a,{color:"secondary",onClick:this.handleCancelButtonClick},V("Cancel")),r.a.createElement(rt.a,{color:"primary",type:"submit",disabled:this.checkLoginButtonDisable()},V("SignIn"))))))}}]),t}(n.Component),mt=function(e){var t=st.a.validate(e,lt,{abortEarly:!1});if(!t.error)return{};var a={},n=!0,r=!1,c=void 0;try{for(var i,o=t.error.details[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;a[s.path]=s.message}}catch(l){r=!0,c=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw c}}return a},ft=Object(d.a)(function(e){var t,a;return{container:(t={width:250},Object(k.a)(t,e.breakpoints.up("sm"),{width:300}),Object(k.a)(t,"display","block"),t),form:(a={width:250},Object(k.a)(a,e.breakpoints.up("sm"),{width:300}),Object(k.a)(a,"display","block"),a),textField:{margin:e.spacing(1)},errorLabel:{color:"red"}}})(dt),ht=Object(it.a)({form:"userLogin",validate:mt})(ft),vt=Object(f.b)(function(e,t){return{shown:e.userDialog.shown,user:e.user.currentUser,formData:e.form.userLogin&&e.form.userLogin.values?e.form.userLogin.values:{}}},{hide:De,show:Ie,loginUser:function(e,t){return function(){var a=Object(ue.a)(le.a.mark(function a(n,r){var c;return le.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ce(e,t);case 2:c=a.sent,n({type:"LOGIN_USER",payload:{user:c}});case 4:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()},showBusyWindow:function(){return{type:"SET_LAYOUT_BUSY"}},hideBusyWindow:function(){return{type:"SET_LAYOUT_READY"}},changeUserLang:J,showErrorDialog:ut,hideErrorDialog:pt})(ht),bt=a(419),gt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,a=e.classes;return r.a.createElement("div",null,r.a.createElement(et.a,{className:a.dialog,open:t,onClose:this.handleDialogClose,disableBackdropClick:!0,disableEscapeKeyDown:!0,PaperProps:{style:{backgroundColor:"transparent",boxShadow:"none"}}},r.a.createElement("div",{className:a.dialogDiv},r.a.createElement(bt.a,{className:a.progress,size:150,thickness:5}))))}}]),t}(n.Component),Et=Object(d.a)(function(e){return{dialog:{},dialogDiv:{},progress:{width:200,height:200,margin:e.spacing(2)}}})(gt),Ot=Object(f.b)(function(e,t){return{shown:e.layout.busy}},{})(Et),wt=a(431),yt=a(432),jt=a(201),Ct=we.valuesRoute,xt=function(){var e=Object(ue.a)(le.a.mark(function e(t,a){var n;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.get("".concat(Ct,"/").concat(t,"/").concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),kt=function(){var e=Object(ue.a)(le.a.mark(function e(t){var a;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.get("".concat(Ct,"/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),It={getValue:xt,getValues:function(){var e=Object(ue.a)(le.a.mark(function e(t,a,n,r){var c;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.get("".concat(Ct,"/").concat(t,"/").concat(a),{params:{timeRangeStart:n,timeRangeStop:r}});case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),getDeviceValues:kt};function Dt(e){var t={valueMin:0,valueMax:100,timeMin:Date.now()-6e4,timeMax:Date.now()};return!_(e)||I(e)?t:(_(e.valueMin)&&_(e.valueMax)&&(t.valueMin=e.valueMin,t.valueMax=e.valueMax),_(e.timeMin)&&_(e.timeMax)&&(t.timeMin=R(e.timeMin),t.timeMax=R(e.timeMax)),t)}var Tt=function(e,t){return{type:"TREND_UPDATE",payload:{trendId:e,properties:t}}},At=function(e,t,a){return function(){var n=Object(ue.a)(le.a.mark(function n(r,c){var i,o,s,l;return le.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,It.getValue(a,t);case 3:if(_(i=n.sent)&&!I(i)){n.next=6;break}return n.abrupt("return");case 6:o=Object.keys(i)[0],s=i[o],l=D(o),r({type:"TREND_FETCH_CURRENT_VALUE",payload:{trendId:e,time:l,value:s}}),n.next=14;break;case 12:n.prev=12,n.t0=n.catch(0);case 14:case"end":return n.stop()}},n,null,[[0,12]])}));return function(e,t){return n.apply(this,arguments)}}()},Rt=function(e,t,a){return function(){var n=Object(ue.a)(le.a.mark(function n(r,c){var i,o,s,l,u,p,d,m,f,h,v,b,g,E,O,w,y,j;return le.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,i=c(),o=i.trends[e],s=o.properties.ranges,l=s.timeMin,u=s.timeMax,p=o.historyData.fetchExtremes,d=p.timeMin,m=p.timeMax,f=o.currentData.extremes,h=f.timeMin,f.timeMax,v=l,b=u,_(h)&&b>h&&(b=h),_(h)&&v>h&&(v=h),!(v>=d&&b<=m)){n.next=12;break}return n.abrupt("return");case 12:return n.next=14,It.getValues(a,t,T(v),T(b));case 14:if(_(g=n.sent)&&!I(g)){n.next=17;break}return n.abrupt("return");case 17:for(E={},O=Object.keys(g),w=0,y=O;w<y.length;w++)j=y[w],E[D(j)]=g[j];r({type:"TREND_FETCH_HISTORY_VALUES",payload:{trendId:e,newFetchTimeMin:v,newFetchTimeMax:b,values:E}}),n.next=26;break;case 23:n.prev=23,n.t0=n.catch(0),console.log(n.t0);case 26:case"end":return n.stop()}},n,null,[[0,23]])}));return function(e,t){return n.apply(this,arguments)}}()},_t=function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a(Tt(e,{autoRangeX:!1}));case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},Mt=function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a(Tt(e,{autoRangeX:!0}));case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},St=function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a(Tt(e,{autoRangeY:!1}));case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},Nt=function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a(Tt(e,{autoRangeY:!0}));case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},Ut=a(357),Ht=a(420),Wt=a(421),Lt=a(422),Vt=a(423),Ft=a(424),Pt=a(425),Bt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.autoRange,a=e.onZoomInClicked,n=e.onZoomOutClicked,c=e.onMoveUpClicked,i=e.onMoveDownClicked,o=e.onAutoResizeClicked,s=e.classes;return r.a.createElement(Ut.a,{className:s.verticalList},r.a.createElement(pe.a,null,r.a.createElement(b.a,{disabled:t,onClick:c},r.a.createElement(Ht.a,null))),r.a.createElement(pe.a,null,r.a.createElement(b.a,{disabled:t,onClick:a},r.a.createElement(Wt.a,null))),r.a.createElement(pe.a,null,r.a.createElement(b.a,{onClick:o},t?r.a.createElement(Lt.a,null):r.a.createElement(Vt.a,null))),r.a.createElement(pe.a,null,r.a.createElement(b.a,{disabled:t,onClick:n},r.a.createElement(Ft.a,null))),r.a.createElement(pe.a,null,r.a.createElement(b.a,{disabled:t,onClick:i},r.a.createElement(Pt.a,null))))}}]),t}(n.Component),Gt=Object(d.a)(function(e){return{horizontalList:{display:"flex",flexDirection:"row",padding:0},verticalList:{display:"flex",flexDirection:"column",padding:0}}})(Bt),zt=Object(f.b)(function(e,t){return{}},{})(Gt),Yt=a(426),Zt=a(427),Xt=a(428),Jt=a(429),Kt=a(430),qt=a(203),$t=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).generateCSVFileName=function(){return"powermonitorIOT_report_".concat(Date.now())},a.getCSVHeader=function(e){return[{label:"Time",key:"time"},{label:e,key:"value"}]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.autoRange,a=e.onZoomInClicked,n=e.onZoomOutClicked,c=e.onMoveRightClicked,i=e.onMoveLeftClicked,o=e.onAutoResizeClicked,s=e.csvData,l=e.csvValueTitle,u=e.classes;return r.a.createElement(Ut.a,{className:u.horizontalList},r.a.createElement(pe.a,null,r.a.createElement(b.a,{disabled:t,onClick:i},r.a.createElement(Yt.a,null))),r.a.createElement(pe.a,null,r.a.createElement(b.a,{disabled:t,onClick:a},r.a.createElement(Wt.a,null))),r.a.createElement(pe.a,null,r.a.createElement(b.a,{onClick:o},t?r.a.createElement(Zt.a,null):r.a.createElement(Xt.a,null))),r.a.createElement(pe.a,null,r.a.createElement(b.a,{disabled:t,onClick:n},r.a.createElement(Ft.a,null))),r.a.createElement(pe.a,null,r.a.createElement(b.a,{disabled:t,onClick:c},r.a.createElement(Jt.a,null))),r.a.createElement(pe.a,null,r.a.createElement(qt.CSVLink,{filename:this.generateCSVFileName(),data:s,headers:this.getCSVHeader(l),onClick:function(e){return!t}},r.a.createElement(b.a,{disabled:t,onClick:c},r.a.createElement(Kt.a,null)))))}}]),t}(n.Component),Qt=Object(d.a)(function(e){return{horizontalList:{display:"flex",flexDirection:"row",padding:0}}})($t),ea=Object(f.b)(function(e,t){return{}},{})(Qt),ta=a(154),aa=a.n(ta),na=we.devicesRoute;function ra(){return ca.apply(this,arguments)}function ca(){return(ca=Object(ue.a)(le.a.mark(function e(){var t;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.get(na);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ia(e){return oa.apply(this,arguments)}function oa(){return(oa=Object(ue.a)(le.a.mark(function e(t){var a;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.get("".concat(na,"/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var sa=we.variablesRoute;function la(e){return ua.apply(this,arguments)}function ua(){return(ua=Object(ue.a)(le.a.mark(function e(t){var a;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.get("".concat(sa,"/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pa(e,t){return da.apply(this,arguments)}function da(){return(da=Object(ue.a)(le.a.mark(function e(t,a){var n;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.get("".concat(sa,"/").concat(t,"/").concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ma=we.calcElementsRoute;function fa(e){return ha.apply(this,arguments)}function ha(){return(ha=Object(ue.a)(le.a.mark(function e(t){var a;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.get("".concat(ma,"/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function va(e,t){return ba.apply(this,arguments)}function ba(){return(ba=Object(ue.a)(le.a.mark(function e(t,a){var n;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.get("".concat(ma,"/").concat(t,"/").concat(a));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ga=function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){var r;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ia(e);case 3:(r=t.sent).variables=M(r.variables,"id"),r.calculationElements=M(r.calculationElements,"id"),a({type:"DATA_FETCH_DEVICE",payload:{device:r}}),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}},t,null,[[0,9]])}));return function(e,a){return t.apply(this,arguments)}}()},Ea=function(e,t){return function(){var a=Object(ue.a)(le.a.mark(function a(n,r){var c,i;return le.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=r(),_(c.data.devices[e])){a.next=7;break}return a.next=5,n(ga(e));case 5:c=r(),c.data.devices[e];case 7:return a.prev=7,a.next=10,pa(e,t);case 10:return i=a.sent,a.next=13,n({type:"DATA_FETCH_VARIABLE",payload:{deviceId:e,variable:i}});case 13:a.next=17;break;case 15:a.prev=15,a.t0=a.catch(7);case 17:case"end":return a.stop()}},a,null,[[7,15]])}));return function(e,t){return a.apply(this,arguments)}}()},Oa=function(e,t){return function(){var a=Object(ue.a)(le.a.mark(function a(n,r){var c,i;return le.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=r(),_(c.data.devices[e])){a.next=7;break}return a.next=5,n(ga(e));case 5:c=r(),c.data.devices[e];case 7:return a.prev=7,a.next=10,va(e,t);case 10:return i=a.sent,a.next=13,n({type:"DATA_FETCH_CALCELEMENT",payload:{deviceId:e,calculationElement:i}});case 13:a.next=17;break;case 15:a.prev=15,a.t0=a.catch(7);case 17:case"end":return a.stop()}},a,null,[[7,15]])}));return function(e,t){return a.apply(this,arguments)}}()},wa=function(e,t){return function(){var a=Object(ue.a)(le.a.mark(function a(n,r){var c,i,o;return le.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=r(),_(i=c.data.devices[e])){a.next=7;break}return a.next=5,n(ga(e));case 5:c=r(),i=c.data.devices[e];case 7:o=t in i.variables,n(o?Ea(e,t):Oa(e,t));case 9:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()},ya=function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){var r,c,i;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=n(),_(r.data.devices[e])){t.next=8;break}return t.next=6,a(ga(e));case 6:r=n(),r.data.devices[e];case 8:return t.next=10,la(e);case 10:c=t.sent,i=M(c,"id"),a({type:"DATA_FETCH_VARIABLES",payload:{deviceId:e,variables:i}}),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(0);case 17:case"end":return t.stop()}},t,null,[[0,15]])}));return function(e,a){return t.apply(this,arguments)}}()},ja=function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){var r,c,i;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=n(),_(r.data.devices[e])){t.next=8;break}return t.next=6,a(ga(e));case 6:r=n(),r.data.devices[e];case 8:return t.next=10,fa(e);case 10:c=t.sent,i=M(c,"id"),a({type:"DATA_FETCH_CALCELEMENTS",payload:{deviceId:e,calculationElements:i}}),t.next=17;break;case 15:t.prev=15,t.t0=t.catch(0);case 17:case"end":return t.stop()}},t,null,[[0,15]])}));return function(e,a){return t.apply(this,arguments)}}()},Ca=function(e,t){return 0!==(e&1<<t)},xa={canVisualizeData:function(e){if(!e)return null;var t=e.permissions;return void 0!==t&&null!==t&&Ca(t,0)},canOperateData:function(e){if(!e)return null;var t=e.permissions;return void 0!==t&&null!==t&&Ca(t,1)},isDataAdmin:function(e){if(!e)return null;var t=e.permissions;return void 0!==t&&null!==t&&Ca(t,2)},isSuperAdmin:function(e){if(!e)return null;var t=e.permissions;return void 0!==t&&null!==t&&Ca(t,3)},getPermissionsArray:function(e){if(!e)return[!1,!1,!1,!1];for(var t=e.permissions,a=[],n=0;n<3;n++)a[n]=this.getBit(t,n);return a}},ka=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).handleSampling=Object(ue.a)(le.a.mark(function e(){var t,n,r,c,i;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.trendId,r=t.variableId,c=t.deviceId,i=t.user,xa.canVisualizeData(i)&&a.props.refresh(n,r,c);case 2:case"end":return e.stop()}},e)})),a.startSampling=function(){a._samplingHandler=setInterval(a.handleSampling,500)},a.stopSampling=function(){clearInterval(a._samplingHandler)},a.create=Object(ue.a)(le.a.mark(function e(){var t,n,r,c,i,o,s,l,u,p,d,m;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props,n=t.user,r=t.createTrend,c=t.fetchElement,i=t.trendId,o=t.variableId,s=t.deviceId,l=t.initialAutoRangeX,u=t.initialAutoRangeY,p=t.currentValuesRefreshing,d=t.historyValuesRefreshing,m=t.initialRanges,!xa.canVisualizeData(n)){e.next=6;break}return e.next=4,r(i,o,s,l,u,p,d,m);case 4:return e.next=6,c(s,o);case 6:a.startSampling();case 7:case"end":return e.stop()}},e)})),a.componentWillUnmount=function(){a._samplingHandler&&a.stopSampling(),a.props.removeTrend(a.props.trendId)},a.renderBusyComponent=function(){return r.a.createElement(wt.a,{className:a.props.classes.gridFullWidthAndHeight,container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(wt.a,{item:!0},r.a.createElement(bt.a,{className:a.props.classes.progress,size:150,thickness:5})))},a.renderTitleText=function(){var e=a.props,t=e.elementObject,n=e.deviceObject;return t&&n?"".concat(n.name," - ").concat(t.name," [").concat(t.unit,"]"):""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,a=e.classes,n=e.trendId,c=e.trendObject,i=e.xZoomIn,o=e.xZoomOut,s=e.yZoomIn,l=e.yZoomOut,u=e.xMoveLeft,p=e.xMoveRight,d=e.yMoveDown,m=e.yMoveUp,f=e.toogleXAutoRange,h=e.toogleYAutoRange;if(!c)return this.create(),this.renderBusyComponent();if(I(c.data.values))return this.renderBusyComponent();var v=t.generateOptionsForChartComponent(c),b=t.convertStateDataToTrendData(c.data.values),E=t.generateDataToSave(c.data.values,c.properties.ranges.timeMin,c.properties.ranges.timeMax),O=this.renderTitleText();return r.a.createElement(wt.a,{container:!0,direction:"column",justify:"center",alignItems:"stretch",className:a.gridFullWidthAndHeight},r.a.createElement(wt.a,{item:!0},r.a.createElement(wt.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(g.a,{variant:"h4",className:a.title},this.renderTitleText()))),r.a.createElement(wt.a,{item:!0,sm:!0},r.a.createElement(wt.a,{className:a.gridFullWidthAndHeight,container:!0,direction:"column",justify:"center",alignItems:"stretch",wrap:"nowrap"},r.a.createElement(wt.a,{item:!0,sm:!0},r.a.createElement(wt.a,{className:a.gridFullWidthAndHeight,container:!0,direction:"row",justify:"center",alignItems:"stretch",wrap:"nowrap"},r.a.createElement(wt.a,{item:!0},r.a.createElement(wt.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:a.gridFullHeight,wrap:"nowrap"},r.a.createElement(zt,{onZoomInClicked:function(){return s(n)},onZoomOutClicked:function(){return l(n)},onMoveUpClicked:function(){return m(n)},onMoveDownClicked:function(){return d(n)},onAutoResizeClicked:function(){return h(n)},autoRange:c.properties.autoRangeY}))),r.a.createElement(wt.a,{item:!0,sm:!0},r.a.createElement(wt.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:a.gridFullWidthAndHeight,wrap:"nowrap"},r.a.createElement(jt.a,{chartType:"SteppedAreaChart",rows:b,options:v,width:"95%",height:"95%",graphID:"ScatterChart",columns:[{type:"date",label:""},{type:"number",label:""},{role:"tooltip",type:"string",p:{html:!0}}]}))))),r.a.createElement(wt.a,{item:!0},r.a.createElement(wt.a,{className:a.gridFullWidthAndHeight,container:!0,direction:"row",justify:"center",alignItems:"center",wrap:"nowrap"},r.a.createElement(ea,{onZoomInClicked:function(){return i(n)},onZoomOutClicked:function(){return o(n)},onMoveRightClicked:function(){return p(n)},onMoveLeftClicked:function(){return u(n)},onAutoResizeClicked:function(){return f(n)},autoRange:c.properties.autoRangeX,csvData:E,csvValueTitle:O}))))))}}],[{key:"generateTrendId",value:function(e,t){return"".concat(e).concat(t)}},{key:"formatTrendTooltip",value:function(e,t){var a=aa()(A(parseInt(e))).format("DD/MM/YYYY HH:mm:ss");return"".concat(t.toFixed(3),"\n").concat(a)}},{key:"convertStateDataToTrendData",value:function(e){return e==={}?[]:Object.keys(e).sort(function(e,t){return parseInt(e)-parseInt(t)}).map(function(a){return[A(parseInt(a)),e[a],t.formatTrendTooltip(a,e[a])]})}},{key:"generateOptionsForChartComponent",value:function(e){var t={title:"",hAxis:{title:""},vAxis:{title:""},legend:"none",chartArea:{width:"90%",height:"90%"}},a=e.properties;return t.hAxis=Object(x.a)({},t.hAxis,{format:"dd/MM/yyyy HH:mm:ss",viewWindow:{min:A(a.ranges.timeMin),max:A(a.ranges.timeMax)}}),t.vAxis=Object(x.a)({},t.vAxis,{viewWindow:{min:a.ranges.valueMin,max:a.ranges.valueMax}}),t}},{key:"generateDataToSave",value:function(e,t,a){return Object.keys(e).filter(function(e){return parseInt(e)>=t&&parseInt(e)<=a}).sort(function(e,t){return parseInt(e)-parseInt(t)}).map(function(t){return{time:aa()(A(parseInt(t))).format("DD/MM/YYYY HH:mm:ss"),value:e[t]}})}}]),t}(n.Component),Ia=Object(d.a)(function(e){return{gridFullWidthAndHeight:{height:"100%",width:"100%"},gridFullWidth:{width:"100%"},gridFullHeight:{height:"100%"},title:{},progress:{width:200,height:200,margin:e.spacing(2)}}})(ka),Da=Object(f.b)(function(e,t){var a,n=t.variableId,r=t.deviceId,c=ka.generateTrendId(r,n);return e.data.devices[r]&&(a=n in e.data.devices[r].variables?e.data.devices[r].variables[n]:e.data.devices[r].calculationElements[n]),{trendId:c,user:e.user.currentUser,trendObject:e.trends[c],lang:e.userPreferences.lang,deviceObject:e.data.devices[t.deviceId],elementObject:a}},{createTrend:function(e,t,a,n,r,c,i,o){return{type:"TREND_CREATE",payload:{trendId:e,variableId:t,deviceId:a,initialAutoRangeX:n,initialAutoRangeY:r,currentValuesRefreshing:c,historyValuesRefreshing:i,initialRanges:Dt(o)}}},updateTrend:Tt,removeTrend:function(e){return{type:"TREND_REMOVE",payload:{trendId:e}}},fetchCurrentValue:At,fetchHistoryValues:Rt,xZoomIn:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){var r,c,i,o,s,l;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n(),c=r.trends[e],i=c.properties.ranges.timeMin,o=c.properties.ranges.timeMax,a(Tt(e,{ranges:{timeMin:(l=i+(o-i)/2)-(s=.9*(o-i)/2),timeMax:l+s}}));case 7:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},xZoomOut:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){var r,c,i,o,s,l;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n(),c=r.trends[e],i=c.properties.ranges.timeMin,o=c.properties.ranges.timeMax,a(Tt(e,{ranges:{timeMin:(l=i+(o-i)/2)-(s=1.1*(o-i)/2),timeMax:l+s}}));case 7:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},yZoomIn:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){var r,c,i,o,s,l;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n(),c=r.trends[e],i=c.properties.ranges.valueMin,o=c.properties.ranges.valueMax,a(Tt(e,{ranges:{valueMin:(l=i+(o-i)/2)-(s=.9*(o-i)/2),valueMax:l+s}}));case 7:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},yZoomOut:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){var r,c,i,o,s,l;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n(),c=r.trends[e],i=c.properties.ranges.valueMin,o=c.properties.ranges.valueMax,a(Tt(e,{ranges:{valueMin:(l=i+(o-i)/2)-(s=1.1*(o-i)/2),valueMax:l+s}}));case 7:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},xMoveLeft:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){var r,c,i,o,s;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n(),c=r.trends[e],i=c.properties.ranges.timeMin,o=c.properties.ranges.timeMax,a(Tt(e,{ranges:{timeMin:i-(s=.1*(o-i)),timeMax:o-s}}));case 6:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},xMoveRight:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){var r,c,i,o,s;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n(),c=r.trends[e],i=c.properties.ranges.timeMin,o=c.properties.ranges.timeMax,a(Tt(e,{ranges:{timeMin:i+(s=.1*(o-i)),timeMax:o+s}}));case 6:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},yMoveDown:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){var r,c,i,o,s;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n(),c=r.trends[e],i=c.properties.ranges.valueMin,o=c.properties.ranges.valueMax,a(Tt(e,{ranges:{valueMin:i-(s=.1*(o-i)),valueMax:o-s}}));case 6:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},yMoveUp:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){var r,c,i,o,s;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n(),c=r.trends[e],i=c.properties.ranges.valueMin,o=c.properties.ranges.valueMax,a(Tt(e,{ranges:{valueMin:i+(s=.1*(o-i)),valueMax:o+s}}));case 6:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},refresh:function(e,t,a){return function(){var n=Object(ue.a)(le.a.mark(function n(r,c){var i,o;return le.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=c(),(o=i.trends[e]).properties.currentValuesRefreshing&&r(At(e,t,a)),o.properties.historyValuesRefreshing&&r(Rt(e,t,a));case 4:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()},toogleXAutoRange:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n().trends[e].properties.autoRangeX?a(_t(e)):a(Mt(e));case 3:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},toogleYAutoRange:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n().trends[e].properties.autoRangeY?a(St(e)):a(Nt(e));case 3:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},fetchElement:wa})(Ia),Ta=function(e,t){return{type:"TREND_DIALOG_SHOW",payload:{deviceId:e,variableId:t,trendId:Da.generateTrendId(e,t)}}},Aa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleCloseClicked=function(){a.props.hide()},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.shown,c=(t.trendId,t.variableId),i=t.deviceId;return r.a.createElement(et.a,{className:"".concat(a.dialog," paperFullWidth"),open:n,onClose:this.handleDialogClose,disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"xl",classes:{paper:a.dialogPaper}},r.a.createElement(wt.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",style:{height:"100%"}},r.a.createElement(wt.a,{item:!0},r.a.createElement(wt.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},r.a.createElement(b.a,{onClick:function(){return e.handleCloseClicked()}},r.a.createElement(yt.a,null)))),r.a.createElement(wt.a,{item:!0,sm:!0},r.a.createElement(Da,{variableId:c,deviceId:i}))))}}]),t}(n.Component),Ra=Object(d.a)(function(e){return{dialog:{paperFullWidth:!0},dialogPaper:{width:"90%",height:"90%"}}})(Aa),_a=Object(f.b)(function(e,t){return{shown:e.trendDialog.shown,trendId:e.trendDialog.trendId,variableId:e.trendDialog.variableId,deviceId:e.trendDialog.deviceId}},{hide:function(){return{type:"TREND_DIALOG_HIDE"}}})(Ra),Ma=a(433),Sa=a(434),Na=a(435),Ua=a(436),Ha=we.infoRoute;function Wa(){return La.apply(this,arguments)}function La(){return(La=Object(ue.a)(le.a.mark(function e(){var t;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.get(Ha);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Va=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).refreshInfo=function(){var e=a.props,t=e.fetchInfo,n=e.user;xa.canVisualizeData(n)&&t()},a.componentDidMount=function(){a._timeHandler=setInterval(a.handleTimerTick,5e3),a.refreshInfo()},a.handleTimerTick=function(){a.refreshInfo()},a.componentWillUnmount=function(){a._timeHandler&&clearInterval(a._timeHandler)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.info;return a||this.refreshInfo(),a?r.a.createElement(h.a,{position:"absolute",className:t.appBar},r.a.createElement(v.a,{className:t.toolBar},r.a.createElement(He,{value:a.RAM.used,max:a.RAM.total,min:0,Icon:Ma.a}),r.a.createElement(He,{value:a.CPU.temperature.value,max:we.maxCPUTemp,min:we.minCPUTemp,Icon:Sa.a}),r.a.createElement(He,{value:a.CPU.load.value,max:100,min:0,Icon:Na.a}),r.a.createElement(He,{value:a.MEM.db1Space.used,max:a.MEM.db1Space.total,min:0,Icon:Ua.a}))):null}}]),t}(n.Component),Fa=Object(d.a)(function(e){return{appBar:{zIndex:e.zIndex.drawer+1,top:"auto",bottom:0,height:35,padding:0},toolBar:{minHeight:0,margin:10}}})(Va),Pa=Object(f.b)(function(e,t){return{info:e.info.info,user:e.user.currentUser}},{fetchInfo:function(){return function(){var e=Object(ue.a)(le.a.mark(function e(t,a){var n;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wa();case 3:n=e.sent,t({type:"FETCH_INFO",payload:{info:n}}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()}})(Fa),Ba=a(437),Ga=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleDialogClose=function(){a.props.hide()},a.handleClose=function(){a.props.hide()},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.shown,a=e.error;return r.a.createElement(et.a,{open:t,onClose:this.handleDialogClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(tt.a,{id:"alert-dialog-title"},a?a.title:""),r.a.createElement(at.a,null,r.a.createElement(Ba.a,{id:"alert-dialog-description"},a?a.message:"")),r.a.createElement(nt.a,null,r.a.createElement(rt.a,{onClick:this.handleClose,color:"secondary",autoFocus:!0},"OK")))}}]),t}(n.Component),za=Object(d.a)(function(e){return{dialog:{},dialogDiv:{},progress:{width:200,height:200,margin:e.spacing(2)}}})(Ga),Ya=Object(f.b)(function(e,t){return{shown:e.error.shown,error:e.error.error}},{show:ut,hide:pt})(za),Za=a(60),Xa=a(208),Ja=a(392),Ka=a(438),qa=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).renderDeviceButton=function(e){return r.a.createElement(Xe.b,{key:e.id,to:"/devicesConfig/".concat(e.id),className:a.props.classes.link},r.a.createElement(pe.a,{button:!0},r.a.createElement(Z.a,{className:a.props.classes.itemIcon},e.connected?r.a.createElement(Ka.a,{className:a.props.classes.connectedIcon}):r.a.createElement(yt.a,{className:a.props.classes.notConnectedIcon})),r.a.createElement(X.a,{primary:e.name})))},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=(t.classes,t.devices),n=Object.values(a);return r.a.createElement(Ja.a,null,r.a.createElement(pe.a,null,r.a.createElement(Z.a,null,r.a.createElement(ze.a,null)),r.a.createElement(X.a,{primary:V("DeviceMenuTitle")})),r.a.createElement(de.a,null),n.map(function(t){return e.renderDeviceButton(t)}))}}]),t}(n.Component),$a=Object(d.a)(function(e){return{notConnectedIcon:{color:"red"},connectedIcon:{color:"green"},itemIcon:{margin:0,padding:0},link:{textDecoration:"none",color:"inherit"}}})(qa),Qa=Object(f.b)(function(e,t){return{devices:e.data.devices,lang:e.userPreferences.lang}})($a),en=a(450),tn=a(445),an=a(159),nn=a(360),rn=a(57),cn=a(439),on=a(443),sn=a(442),ln=a(440),un=a(444),pn=a(454),dn=a(441),mn=a(156),fn=a.n(mn),hn=a(158),vn=a.n(hn),bn=a(157),gn=a.n(bn),En=a(155),On=a.n(En),wn=Object(nn.a)(function(e){return{root:{flexShrink:0,color:e.palette.text.secondary,marginLeft:e.spacing(2.5)}}});function yn(e){var t=wn(),a=Object(rn.a)(),n=e.count,c=e.page,i=e.rowsPerPage,o=e.onChangePage;return r.a.createElement("div",{className:t.root},r.a.createElement(b.a,{onClick:function(e){o(e,0)},disabled:0===c,"aria-label":"First Page"},"rtl"===a.direction?r.a.createElement(On.a,null):r.a.createElement(fn.a,null)),r.a.createElement(b.a,{onClick:function(e){o(e,c-1)},disabled:0===c,"aria-label":"Previous Page"},"rtl"===a.direction?r.a.createElement(gn.a,null):r.a.createElement(vn.a,null)),r.a.createElement(b.a,{onClick:function(e){o(e,c+1)},disabled:c>=Math.ceil(n/i)-1,"aria-label":"Next Page"},"rtl"===a.direction?r.a.createElement(vn.a,null):r.a.createElement(gn.a,null)),r.a.createElement(b.a,{onClick:function(e){o(e,Math.max(0,Math.ceil(n/i)-1))},disabled:c>=Math.ceil(n/i)-1,"aria-label":"Last Page"},"rtl"===a.direction?r.a.createElement(fn.a,null):r.a.createElement(On.a,null)))}var jn=Object(nn.a)(function(e){return{root:{width:"100%",marginTop:e.spacing(3)},table:{minWidth:500},tableWrapper:{overflowX:"auto"}}});function Cn(e){var t=e.elements,a=e.onTrendClicked,n=jn(),c=r.a.useState(0),i=Object(an.a)(c,2),o=i[0],s=i[1],l=r.a.useState(6),u=Object(an.a)(l,2),p=u[0],d=u[1],m=p-Math.min(p,t.length-o*p);return r.a.createElement(Xa.a,{className:n.root},r.a.createElement("div",{className:n.tableWrapper},r.a.createElement(cn.a,{className:n.table},r.a.createElement(ln.a,null,r.a.createElement(dn.a,null,r.a.createElement(sn.a,null,V("ElementsConfigTableElementName")),r.a.createElement(sn.a,{align:"right"},V("ElementsConfigTableElementValue")))),r.a.createElement(on.a,null,t.slice(o*p,o*p+p).map(function(e){return r.a.createElement(dn.a,{key:e.id},r.a.createElement(sn.a,{component:"th",scope:"row"},e.name),r.a.createElement(sn.a,{align:"right"},_((t=e).value)?"".concat(t.value.toFixed(3)," ").concat(t.unit):"",r.a.createElement(b.a,{onClick:function(){return a(e.id)}},r.a.createElement(Be.a,null))));var t}),m>0&&r.a.createElement(dn.a,{style:{height:48*m}},r.a.createElement(sn.a,{colSpan:6}))),r.a.createElement(un.a,null,r.a.createElement(dn.a,null,r.a.createElement(pn.a,{rowsPerPageOptions:[6],colSpan:3,count:t.length,rowsPerPage:p,page:o,SelectProps:{inputProps:{"aria-label":"Rows per page"},native:!0},onChangePage:function(e,t){s(t)},onChangeRowsPerPage:function(e){d(parseInt(e.target.value,10))},ActionsComponent:yn}))))))}var xn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleShowTrendClick=function(e){var t=a.props,n=t.deviceId;(0,t.showTrend)(n,e)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.classes,e.device);if(!_(t))return null;var a=Object.values(t.variables);return r.a.createElement(Cn,{elements:a,onTrendClicked:this.handleShowTrendClick})}}]),t}(n.Component),kn=Object(d.a)(function(e){return{table:{height:"500px"},flexContainer:{display:"flex",alignItems:"center",boxSizing:"border-box"},tableRow:{cursor:"pointer"},tableRowHover:{"&:hover":{backgroundColor:e.palette.grey[200]}},tableCell:{flex:1},noClick:{cursor:"initial"}}})(xn),In=Object(f.b)(function(e,t){return{device:e.data.devices[t.deviceId],lang:e.userPreferences.lang,user:e.user.currentUser}},{showTrend:Ta})(kn),Dn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSampling=Object(ue.a)(le.a.mark(function e(){var t,n,r,c;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props.match.params.deviceId,n=a.props,r=n.user,c=n.fetchValues,xa.canVisualizeData(r)&&c(t);case 3:case"end":return e.stop()}},e)})),a.startSampling=function(){a._samplingHandler=setInterval(a.handleSampling,5e3)},a.stopSampling=function(){clearInterval(a._samplingHandler)},a.handleTabClicked=function(e,t){a.props.changeTab(t)},a.componentWillUnmount=function(){a._samplingHandler&&a.stopSampling()},a.componentDidMount=function(){a.startSampling()},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"fetchElementsIfNotFetched",value:function(){var e=this.props.match.params.deviceId,t=this.props,a=t.user,n=t.fetchAllElements;this._fetchedDeviceId&&this._fetchedDeviceId===e||xa.canVisualizeData(a)&&(n(e),this._fetchedDeviceId=e)}},{key:"render",value:function(){var e=this.props.match.params.deviceId,t=this.props,a=t.classes,n=t.tabNumber;return this.fetchElementsIfNotFetched(),r.a.createElement("div",{className:a.root},r.a.createElement(h.a,{position:"static"},r.a.createElement(en.a,{value:n,onChange:this.handleTabClicked},r.a.createElement(tn.a,{label:V("DeviceConfigVariableTitle")}),r.a.createElement(tn.a,{label:V("DeviceConfigCalcElementTitle")}))),0===n&&r.a.createElement(In,{deviceId:e}),1===n&&r.a.createElement(g.a,null,"Item Two"))}}]),t}(n.Component),Tn=Object(d.a)(function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}})(Dn),An=Object(f.b)(function(e,t){return{tabNumber:e.deviceConfig.tabNumber,lang:e.userPreferences.lang,user:e.user.currentUser}},{changeTab:function(e){return{type:"DEVICE_CONFIG_CHANGE_TAB",payload:{tabNumber:e}}},fetchAllElements:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(_(n().data.devices[e])){t.next=7;break}return t.next=5,a(ga(e));case 5:n().data.devices[e];case 7:return t.next=9,a(ya(e));case 9:return t.next=11,a(ja(e));case 11:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},fetchValues:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){var r;return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(_(n().data.devices[e])){t.next=7;break}return t.next=5,a(ga(e));case 5:n().data.devices[e];case 7:return t.next=9,It.getDeviceValues(e);case 9:return r=t.sent,t.next=12,a({type:"DATA_FETCH_VALUES",payload:{deviceId:e,values:r}});case 12:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()}})(Tn),Rn=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).refreshDevices=function(){var e=a.props,t=e.fetchDevices,n=e.user;I(e.devices)&&xa.canVisualizeData(n)&&t()},a.componentDidMount=function(){a._timeHandler=setInterval(a.handleTimerTick,5e3)},a.handleTimerTick=function(){var e=a.props,t=e.user,n=e.devices,r=e.refreshConnections;n&&xa.canVisualizeData(t)&&r()},a.componentWillUnmount=function(){a._timeHandler&&clearInterval(a._timeHandler)},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){this.refreshDevices();var e=this.props,t=e.classes;return e.devices?r.a.createElement(wt.a,{container:!0,className:t.root,direction:"row",justify:"center",alignItems:"stretch",wrap:"nowrap"},r.a.createElement(wt.a,{item:!0},r.a.createElement(Xa.a,{className:t.leftColumn},r.a.createElement(Qa,null))),r.a.createElement(wt.a,{item:!0,xs:!0},r.a.createElement(Xa.a,{className:t.rightColumn},r.a.createElement(Za.c,null,r.a.createElement(Za.a,{path:"/devicesConfig/:deviceId",component:An}))))):null}}]),t}(n.Component),_n=Object(d.a)(function(e){return{root:{height:"100%"},leftColumn:{padding:e.spacing(1),margin:e.spacing(1),height:"100%",width:250},rightColumn:{padding:e.spacing(1),margin:e.spacing(1),height:"100%"}}})(Rn),Mn=Object(f.b)(function(e,t){return{devices:e.data.devices,user:e.user.currentUser,trendObject:e.trends[Da.generateTrendId("5d134065682f6f0e682d4015","5d134065682f6f0e682d3fe0")]}},{fetchDevices:function(){return function(){var e=Object(ue.a)(le.a.mark(function e(t,a){var n,r,c,i,o,s,l,u;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ra();case 3:for(n=e.sent,r={},c=!0,i=!1,o=void 0,e.prev=8,s=n[Symbol.iterator]();!(c=(l=s.next()).done);c=!0)(u=l.value).variables=M(u.variables),u.calculationElements=M(u.calculationElements),r[u.id]=u;e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),i=!0,o=e.t0;case 16:e.prev=16,e.prev=17,c||null==s.return||s.return();case 19:if(e.prev=19,!i){e.next=22;break}throw o;case 22:return e.finish(19);case 23:return e.finish(16);case 24:t({type:"DATA_FETCH_DEVICES",payload:{devices:r}}),e.next=29;break;case 27:e.prev=27,e.t1=e.catch(0);case 29:case"end":return e.stop()}},e,null,[[0,27],[8,12,16,24],[17,,19,23]])}));return function(t,a){return e.apply(this,arguments)}}()},refreshConnections:function(){return function(){var e=Object(ue.a)(le.a.mark(function e(t,a){var n,r;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ra();case 3:n=e.sent,r=n.map(function(e){return{deviceId:e.id,connection:e.connected}}),t({type:"DATA_REFRESH_CONNECTIONS",payload:{connections:r}}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}()},startRefreshingCurrentValues:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a(Tt(e,{currentValuesRefreshing:!0}));case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},startRefreshingHistoryValues:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a(Tt(e,{historyValuesRefreshing:!0}));case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},stopRefreshingCurrentValues:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a(Tt(e,{currentValuesRefreshing:!1}));case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},stopRefreshingHistoryValues:function(e){return function(){var t=Object(ue.a)(le.a.mark(function t(a,n){return le.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a(Tt(e,{historyValuesRefreshing:!1}));case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},fetchDevice:ga,fetchVariable:Ea,fetchCalculationElement:Oa,fetchElement:wa,showTrendDialog:Ta})(_n),Sn=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(wt.a,{className:e.container},r.a.createElement(Za.c,null,r.a.createElement(Za.a,{path:"/devicesConfig",component:Mn})))}}]),t}(n.Component),Nn=Object(d.a)(function(e){return{container:{padding:e.spacing(1),height:"calc(100% - 110px)"}}})(Sn),Un=Object(f.b)(function(e,t){return{}},{})(Nn),Hn=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem(ye);e&&this.props.logUserWithJWT(e),this.props.activateUserCheck()}},{key:"checkUser",value:function(){var e=this.props,t=e.user,a=e.userDialogShown;!e.userCheckActive||t||a||this.props.showUserDialog()}},{key:"render",value:function(){var e=this.props.classes;return this.checkUser(),r.a.createElement("div",{className:e.root},r.a.createElement(m.a,null),r.a.createElement(Ve,null),r.a.createElement(Pa,null),r.a.createElement($e,null),r.a.createElement(_a,null),r.a.createElement(vt,null),r.a.createElement(Ot,null),r.a.createElement(Ya,null),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.appBarSpacer}),r.a.createElement(Un,null)))}}]),t}(n.Component),Wn=Object(d.a)(function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}})(Hn),Ln=Object(f.b)(function(e,t){return{userDialogShown:e.userDialog.shown,user:e.user.currentUser,userCheckActive:e.layout.userCheckActive}},{logUserWithJWT:function(e){return{type:"LOGIN_USER_WITH_JWT",payload:{user:ke(e)}}},hideUserDialog:De,showUserDialog:Ie,activateUserCheck:function(){return{type:"LAYOUT_ACTIVATE_USER_CHECK"}},deactivateUserCheck:function(){return{type:"LAYOUT_DEACTIVATE_USER_CHECK"}}})(Wn),Vn=a(206),Fn=Object(Vn.a)({palette:{}}),Pn=a(205),Bn=a.n(Pn),Gn=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{store:L},r.a.createElement(Xe.a,null,r.a.createElement(Bn.a,{theme:Fn},r.a.createElement(Ln,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Gn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[216,1,2]]]);
//# sourceMappingURL=main.2cc93542.chunk.js.map